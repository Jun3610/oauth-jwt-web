<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>๊ตฌ๊ธ ๋ก๊ทธ์ธ ์๋ฃ</title>
</head>
<body>
<h1>๊ตฌ๊ธ ๋ก๊ทธ์ธ ๊ฒฐ๊ณผ</h1>
<div id="info" style="white-space: pre-wrap; font-family: monospace;"></div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get("code");

    if (!code) {
        alert("๊ตฌ๊ธ ๋ก๊ทธ์ธ ์คํจ: code ํ๋ผ๋ฏธํฐ ์์");
        throw new Error("๊ตฌ๊ธ ๋ก๊ทธ์ธ ์คํจ: code ์์");
    }

    fetch(`http://localhost:8080/api/google/auth?code=${encodeURIComponent(code)}`, {
        method: "POST",
        credentials: "include"
    })
        .then(res => {
            if (!res.ok) throw new Error("์๋ฒ ์๋ต ์คํจ");
            return res.json();
        })
        .then(data => {
            const {
                accessToken,
                refreshToken,
                tokenType,
                expiresIn,
                userId,
                username
            } = data;

            const output = `
๐ Access Token  : ${accessToken}
โป๏ธ  Refresh Token : ${refreshToken}
๐ Token Type    : ${tokenType}
โณ Expires In    : ${expiresIn}
๐ User ID       : ${userId}
๐ค Username      : ${username}
            `;

            document.getElementById("info").textContent = output;
        })
        .catch(err => {
            console.error("๊ตฌ๊ธ ๋ก๊ทธ์ธ ์๋ฌ:", err);
            alert("๋ก๊ทธ์ธ ์ฒ๋ฆฌ ์ค ์ค๋ฅ ๋ฐ์");
        });
</script>
</body>
</html>
